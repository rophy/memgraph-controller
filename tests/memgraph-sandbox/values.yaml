memgraph:
  image:
    tag: 3.6.1
  replicaCount: 3
  memgraphConfig:
  - "--data-directory=/var/lib/memgraph/mg_data"
  - "--log-level=INFO"
  - "--also-log-to-stderr=true"
  - "--replication-restore-state-on-startup=true"
#  - "--storage-snapshot-on-exit=false"
  serviceAccount:
    create: false
  container:
    readinessProbe:
      exec:
        command: ["/bin/sh", "-c", "echo 'RETURN 0;' | timeout 10s mgconsole --output-format csv --username=memgraph >/dev/null 2>&1"]
      failureThreshold: 1
      timeoutSeconds: 10
      periodSeconds: 30
    livenessProbe:
      exec:
        command: ["/bin/sh", "-c", "echo 'RETURN 0;' | timeout 10s mgconsole --output-format csv --username=memgraph >/dev/null 2>&1"]
      failureThreshold: 20
      timeoutSeconds: 10
      periodSeconds: 30
      volumeMounts:
        - name: memgraph-sandbox-lib-storage
          mountPath: /var/lib/memgraph
      securityContext:
        runAsUser: 101
        runAsGroup: 103

# Use the unified test-client chart as a dependency
test-client:
  enabled: true
  replicaCount: 1
  image:
    repository: test-client
    tag: latest
    pullPolicy: IfNotPresent
  env:
    NEO4J_USERNAME: "memgraph"
    NEO4J_PASSWORD: ""
